{"version":3,"sources":["app.ts","environment.ts","main.ts","resources/index.ts","resources/attributes/picker.ts"],"names":[],"mappings":"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","file":"app-bundle.js","sourcesContent":["import { bindable } from 'aurelia-framework';\n\nexport class App {\n  @bindable inputValue: any;\n  @bindable buttonValue: any;\n  @bindable inputList = [\n    \"Chocolate\",\n    \"Vanilla\",\n    \"Orange\"\n  ]\n  @bindable buttonList = [\n    \"Jump\",\n    \"Run\",\n    \"Skip\",\n    \"Walk\"\n  ]\n  message = 'Hello World!';\n}\n","export default {\n  debug: true,\n  testing: true\n};\n","import {Aurelia} from 'aurelia-framework'\nimport environment from './environment';\n\n//Configure Bluebird Promises.\n(<any>Promise).config({\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia: Aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","import {FrameworkConfiguration} from 'aurelia-framework';\n\nexport function configure(config: FrameworkConfiguration) {\n  config.globalResources(['resources/attributes/picker']);\n}\n","import { inject, bindable, Container, ViewEngine, View, bindingMode} from 'aurelia-framework';\r\nimport { DOM } from 'aurelia-pal';\r\n\r\n@inject(Element, Container,  ViewEngine)\r\nexport class PickerCustomAttribute {\r\n  show = false;\r\n  mouseupListener: EventListener;\r\n  focusListener: EventListener;\r\n  divElement: HTMLElement;\r\n  @bindable({ defaultBindingMode: bindingMode.twoWay }) value: any;\r\n  @bindable({ defaultBindingMode: bindingMode.twoWay }) items: Array<any>;\r\n\r\n  constructor(private element: any, private container: Container, private viewEngine: ViewEngine) {\r\n    this.mouseupListener = e => this.handleMouseUp(e);\r\n    this.focusListener = e => this.handleFocus(e);\r\n  }\r\n\r\n  attached() {\r\n    if (this.isInputElement()) {\r\n      this.element.addEventListener('focus', this.focusListener);\r\n      this.element.addEventListener('blur', this.focusListener);\r\n    } else {\r\n      this.element.addEventListener('click', this.mouseupListener);\r\n    }\r\n  }\r\n\r\n  detached() {\r\n    if (this.isInputElement) {\r\n      this.element.removeEventListener('focus', this.focusListener);\r\n      this.element.removeEventListener('blur', this.focusListener);\r\n    } else {\r\n      this.element.removeEventListner('click', this.mouseupListener);\r\n    }\r\n    document.removeEventListener('mouseup', this.mouseupListener);\r\n  }\r\n  \r\n  pick(item) {\r\n    this.value = item;\r\n    if (this.isInputElement()) {\r\n      //Since we're not binding the value on the input element we update it here.\r\n      this.element.value = item;\r\n    }\r\n\r\n    this.removePicker();\r\n  }\r\n\r\n  handleMouseUp(e) {\r\n    if (!this.isInputElement() && !this.show) {\r\n      this.createPicker();\r\n    }\r\n    if (this.show) {\r\n      /*\r\n        Remove picker if click is outside of it's client rectangle.\r\n      */\r\n      let containerRect = this.divElement.getBoundingClientRect();\r\n      let elementRect = this.element.getBoundingClientRect();\r\n      let inContainerRect = e.clientX > containerRect.left && e.clientX < containerRect.right && e.clientY > containerRect.top && e.clientY < containerRect.bottom;\r\n      let inElementRect = e.clientX > elementRect.left && e.clientX < elementRect.right && e.clientY > elementRect.top && e.clientY < elementRect.bottom;\r\n      if (!inContainerRect && !inElementRect) {\r\n        this.removePicker();\r\n      }\r\n    }\r\n  }\r\n\r\n  handleFocus(e) {\r\n    if (e.type === 'focus' && !this.show) {\r\n      this.createPicker();\r\n    }\r\n    if (e.type === 'blur') {\r\n      if (this.isInputElement() && this.element.value !== this.value && typeof this.value !== \"undefined\") {\r\n        this.element.value = this.value\r\n      }\r\n    }\r\n  }\r\n\r\n  isInputElement() {\r\n    return this.element.nodeType === 1 && this.element.tagName.toLowerCase() == 'input';\r\n  }\r\n\r\n  createPicker() {\r\n    this.viewEngine.loadViewFactory('resources/attributes/picker.html').then(factory => {\r\n      const childContainer = this.container.createChild();\r\n      const view = factory.create(childContainer);\r\n      view.bind(this);\r\n\n      this.addElement(view)\r\n\r\n      if (this.isInputElement)\r\n        document.addEventListener('mouseup', this.mouseupListener);\r\n\r\n      this.show = true;\r\n    })\r\n\r\n  }\n\r\n  removePicker() {\r\n    const body = DOM.querySelectorAll('body')[0];\r\n    body.removeChild(this.divElement);\r\n\r\n    if (this.isInputElement)\r\n      document.removeEventListener('mouseup', this.mouseupListener);\r\n\r\n    this.show = false;\r\n\r\n  }\n\r\n  addElement(view: View) {\r\n    const body = DOM.querySelectorAll('body')[0];\n\r\n    this.divElement = <HTMLElement>DOM.createElement('div');\r\n    view.appendNodesTo(this.divElement);\r\n\r\n\r\n    const elementRect = this.element.getBoundingClientRect();\r\n    const left = elementRect.left + window.scrollX;\r\n    const height = this.divElement.getBoundingClientRect().height;\r\n    var top = elementRect.top + elementRect.height;\r\n\r\n    top = ((top+height) < window.innerHeight) ? top + window.scrollY : (elementRect.top - height + window.scrollY);\r\n\r\n    this.divElement.style.top = top + 'px';\r\n    this.divElement.style.left = left + 'px';\r\n    this.divElement.style.position = 'absolute';\r\n    this.divElement.style.zIndex = '2001';\r\n\r\n    body.insertBefore(this.divElement, body.firstChild);\r\n  }\n\r\n\r\n}\r\n"],"sourceRoot":"../src"}